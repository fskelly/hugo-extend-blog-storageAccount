<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>
  
     Building more redundancy and replicating folder structure | 
    Fletcher&#39;s Tech Blog
  
</title><meta name="description" content="A day in the life of a Cloud Engineer."><meta name="author" content="Fletcher Kelly">

<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/favicon-32x32.png " sizes="32x32" type="image/png">
<link rel="icon" href="/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0c344b">
<link rel="icon" href="/favicon.ico">


    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism.min.css">
    



    
        
            <link rel="stylesheet" href="/dist/main.37ab3f61b95417873748.min.css">
        
    




<link rel="canonical" href="https://cloudadventures.fskelly.com/2011/07/07/building-more-redundancy-and-replicating-folder-structure/"><meta property="og:title" content="Building more redundancy and replicating folder structure" />
<meta property="og:description" content="We have had a few failures of the power kind (thanks to the electricity provider in South Africa, who will remain nameless). So we have now had to build in further redundancy to cater for this and for other business needs. There is nothing worse than getting a phone call saying that critical services are unavailable at a CRITICAL time. What a nightmare. So a few plans were set in motion." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cloudadventures.fskelly.com/2011/07/07/building-more-redundancy-and-replicating-folder-structure/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2011-07-07T06:15:39+00:00" />
<meta property="article:modified_time" content="2011-07-07T06:15:39+00:00" />

<meta itemprop="name" content="Building more redundancy and replicating folder structure">
<meta itemprop="description" content="We have had a few failures of the power kind (thanks to the electricity provider in South Africa, who will remain nameless). So we have now had to build in further redundancy to cater for this and for other business needs. There is nothing worse than getting a phone call saying that critical services are unavailable at a CRITICAL time. What a nightmare. So a few plans were set in motion."><meta itemprop="datePublished" content="2011-07-07T06:15:39+00:00" />
<meta itemprop="dateModified" content="2011-07-07T06:15:39+00:00" />
<meta itemprop="wordCount" content="371">
<meta itemprop="keywords" content="Create,DFS,Distributed File System,Folder Structure,powershell,Replicate," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building more redundancy and replicating folder structure"/>
<meta name="twitter:description" content="We have had a few failures of the power kind (thanks to the electricity provider in South Africa, who will remain nameless). So we have now had to build in further redundancy to cater for this and for other business needs. There is nothing worse than getting a phone call saying that critical services are unavailable at a CRITICAL time. What a nightmare. So a few plans were set in motion."/>

</head>
<body>
    
<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top shadow-sm" id="navbar-main-menu">
    <div class="container">
        <a class="navbar-brand font-weight-bold" href="https://cloudadventures.fskelly.com">Fletcher&#39;s Tech Blog</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="main-menu">
            <ul class="navbar-nav ml-auto">
                
                    <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
                
            
            </ul>
        </div>
    </div>
</nav>


    
<main class="content-page container pt-7 pb-5">
    
    <div class="row">
        <div class="col">
            <article>
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="meta text-muted mb-3">
                            <p class="created text-muted text-uppercase font-weight-bold mb-1">July 7, 2011</p>
                            <span class="mr-2"><i class="fas fa-book-open mr-2"></i>371 words</span>
                            <span><i class="fas fa-clock mr-2"></i>2 mins read</span>
                        </div>

                        <h1>Building more redundancy and replicating folder structure</h1>

                        
                    </div>
                </div><div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="content">
                            <p>We have had a few failures of the power kind (thanks to the electricity provider in South Africa, who will remain nameless). So we have now had to build in further redundancy to cater for this and for other business needs. There is nothing worse than getting a phone call saying that critical services are unavailable at a CRITICAL time. What a nightmare. So a few plans were set in motion.</p>
<p>FINALLY, I got my request for DFS approved. YAY!!!!</p>
<p>So, the process started. <a href="http://technet.microsoft.com/en-us/library/cc732863(WS.10).aspx">Installing</a> DFS for Windows Server 2008 R2 is really simple and was completed in a couple of minutes, however the fun starts after the install and with the configuration of the replicated folders. The above link covers all aspects of the install and “sub” installs and procedures like configuring a namespace and replicated folders.</p>
<p>There is just one little “gotcha” I came across, when I tried to create the first replicated folder, I configured the replication pair with the “root” folder. When I was running through the wizard I got an error when trying to replicate security permissions. The mistake I was making was to include the “root” folder. Do NOT do this. The solution is simple, create the root DFS namespace and create separate replicated folder pairs for each sub folder and then wait for the replication to occur. Awesome!!!!!!</p>
<p> </p>
<p>So now, for additional redundancy. we have another 3rd party application which handles printing and we need to keep an empty “folder structure” for this somewhere safe in case of a DR situation. This is a requirement placed on us by the Vendor. So, I like powershell, so I decided to create a powershell script to do this for me and, of course, the reverse of creating the “folder structure”. Scripts are below.</p>
<p> </p>
<blockquote>
<p><!-- raw HTML omitted -->Create-FolderStructure.ps1<!-- raw HTML omitted --></p>
<p>#Create an array with folder objects<br>
$dirs = get-childitem -Recurse | Where {$_.psIsContainer -eq $true}<br>
 <br>
#get folder full names<br>
$dirs | select fullname  | out-file</p>
<p> </p>
</blockquote>
<p>So, now you have the folder structure, Great!!!!</p>
<p>However now you need to re-create the folder structure. What now?</p>
<p>Of course, I have created a scriptt for that.</p>
<blockquote>
<p><!-- raw HTML omitted -->Create-Folders.ps1<!-- raw HTML omitted --></p>
<p>$dirs = Get-Content –Path <!-- raw HTML omitted --></p>
<p>foreach ($dir in $dirs)<br>
{<br>
    New-Item -Path $dir -ItemType Directory</p>
<p>}</p>
</blockquote>
<p>Hope this helps,</p>
<p>Follow me</p>
<p><a href="http://www.facebook.com/fletcher.kelly"><!-- raw HTML omitted --></a> <a href="http://twitter.com/#!/fskelly"><!-- raw HTML omitted --></a></p>

                        </div><div class="tags my-3"><a class="badge badge-pill badge-light border mr-2" href="/tags/create">
                                    <i class="fas fa-tag mr-2"></i>Create
                                </a><a class="badge badge-pill badge-light border mr-2" href="/tags/dfs">
                                    <i class="fas fa-tag mr-2"></i>DFS
                                </a><a class="badge badge-pill badge-light border mr-2" href="/tags/distributed-file-system">
                                    <i class="fas fa-tag mr-2"></i>Distributed File System
                                </a><a class="badge badge-pill badge-light border mr-2" href="/tags/folder-structure">
                                    <i class="fas fa-tag mr-2"></i>Folder Structure
                                </a><a class="badge badge-pill badge-light border mr-2" href="/tags/powershell">
                                    <i class="fas fa-tag mr-2"></i>powershell
                                </a><a class="badge badge-pill badge-light border mr-2" href="/tags/replicate">
                                    <i class="fas fa-tag mr-2"></i>Replicate
                                </a></div><ul class="share nav my-3 justify-content-end">
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://twitter.com/intent/tweet?url=https%3a%2f%2fcloudadventures.fskelly.com%2f2011%2f07%2f07%2fbuilding-more-redundancy-and-replicating-folder-structure%2f&text=Building%20more%20redundancy%20and%20replicating%20folder%20structure">
              <i class="fa-fw fab fa-twitter"></i>
          </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fcloudadventures.fskelly.com%2f2011%2f07%2f07%2fbuilding-more-redundancy-and-replicating-folder-structure%2f&title=Building%20more%20redundancy%20and%20replicating%20folder%20structure">
                <i class="fa-fw fab fa-linkedin-in"></i>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fcloudadventures.fskelly.com%2f2011%2f07%2f07%2fbuilding-more-redundancy-and-replicating-folder-structure%2f&t=Building%20more%20redundancy%20and%20replicating%20folder%20structure">
                <i class="fa-fw fab fa-facebook-f"></i>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://reddit.com/submit?url=https%3a%2f%2fcloudadventures.fskelly.com%2f2011%2f07%2f07%2fbuilding-more-redundancy-and-replicating-folder-structure%2f&title=Building%20more%20redundancy%20and%20replicating%20folder%20structure">
                <i class="fa-fw fab fa-reddit-alien"></i>
            </a>
        </li>
    </nav>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        
                    </div>
                </div><div class="row justify-content-center my-3">
                    <div class="col-lg-8">
                        <div id="commento"></div>
                        <script src="https://commento.io"></script>
                    </div>
                </div></article>
        </div>
    </div>

    <div class="related-content row mt-5 row-cols-1 row-cols-lg-3"><div class="col mb-3">
                <div class="card h-100">
    
    <a href="/2011/05/27/changing-your-protection-server-in-dpm-to-another-server/" class="d-block"><div class="card-body">
            <h4 class="card-title">Changing your Protection Server in DPM to another server</h4>
            <p class="card-text text-muted text-uppercase">May 27, 2011</p>
            <div class="card-text">
                Have you ever been in a situation where you have either removed or added a new DPM server to your environment?
It happened to me just the other day, I had to “re-think” my DPM design and starting using “Local” to each Data Centre DPM servers to backup my data at each Data Centre. However, this was not the case before this, we were using the same product, but a different strategy.
            </div>
        </div>
    </a>
</div>

            </div><div class="col mb-3">
                <div class="card h-100">
    
    <a href="/2011/05/24/to-protect-or-not-to-protect/" class="d-block"><div class="card-body">
            <h4 class="card-title">To Protect or NOT to Protect</h4>
            <p class="card-text text-muted text-uppercase">May 24, 2011</p>
            <div class="card-text">
                I have finally found some time to look some more into DPM and decided to modify my environment and created some additional PROTECTION GROUPS. I am particularly chuffed as I have not done this before. Make no error, I have used DPM extensively for mailbox recoveries (Execs and other users crying about loosing items), recovering of databases and VHD (see some of my previous posts). So back to my point, the Protection groups were created without any hassle and now I have a dedicated SharePoint Protection Group.
            </div>
        </div>
    </a>
</div>

            </div><div class="col mb-3">
                <div class="card h-100">
    
    <a href="/2011/05/20/powershell-console-to-power-all-plugins/" class="d-block"><div class="card-body">
            <h4 class="card-title">POWERshell console to power all plugins</h4>
            <p class="card-text text-muted text-uppercase">May 20, 2011</p>
            <div class="card-text">
                I do not know about everyone else. I am a rather busy admin and quite fond of powershell and scripting. However, I also have a separate admin account for doing my administrative tasks. Now when you are working with multiple systems, all of which have PowerShell consoles, it can become a little bit of a pain opening a console for Exchange 2010, Operations Manager 2010, Virtual Machine Manager and Service Manager to name a few.
            </div>
        </div>
    </a>
</div>

            </div></div>
</main>


    <footer class="footer text-center bg-dark py-6">
    <div class="container">
        <div class="row">
            <div class="col">
                <ul class="list-inline">
                    <li class="list-inline-item"><a href="https://cloudadventures.fskelly.com/index.xml" rel="alternate" type="application/rss+xml" class="icons d-block">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a></li><li class="list-inline-item">
                            <a href="https://github.com/fskelly" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://linkedin.com/in/fletcherkelly" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://twitter.com/fskelly" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                </ul>

                <p class="text-muted">
                    
                        Copyright © 2019–2021, Fletcher Kelly; all rights reserved.
                    
                </p>

                <p class="text-muted">
                Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with <a href="https://github.com/puresyntax71/hugo-theme-chunky-poster" target="_blank">Chunky Poster</a>.
                </p>
            </div>
        </div>
    </div>
</footer>

    
    
        
            <script src="/dist/main.d608eadfe5ac0688902e.min.js"></script>
        
    



<script>
    window.Prism = window.Prism || {};
    window.Prism.manual = true;
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/autoloader/prism-autoloader.min.js"></script>







    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-XXXX', 'auto');
	
	ga('send', 'pageview');
}
</script>
</body>
</html>
